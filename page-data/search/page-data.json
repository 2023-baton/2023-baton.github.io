{"componentChunkName":"component---src-pages-search-jsx","path":"/search/","result":{"data":{"allMarkdownRemark":{"nodes":[{"excerpt":"ğŸ’¬ ê°œìš” ë¨¼ì € ì§€ì†ì  ë°°í¬(CD, Continuous Deploy)ë¥¼ êµ¬ì¶•í•˜ê¸° ìœ„í•´ì„œ ë‹¤ìŒê³¼ ê°™ì€ ê¸°ìˆ ì„ ì„ íƒí–ˆìŠµë‹ˆë‹¤. GitHub Self Hosted Runner : í˜„ì¬ í´ë¼ìš°ë“œ ìƒí™©ì— ì í•©í•˜ë‹¤. Docker Hub : EC2 ë‚´ë¶€ì—ì„œ ìŠ¤í”„ë§ í”„ë¡œì íŠ¸ê°€ ë¹Œë“œ(build)ëœ ì´ë¯¸ì§€(Image)ë¥¼ ê°€ì ¸ì™€ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤. image âœ… GitHub Seâ€¦","fields":{"slug":"/02.GitHub_Self_Hosted_Runner_Docker_Hubë¥¼_ì´ìš©í•œ_ì§€ì†ì _ë°°í¬/"},"frontmatter":{"date":"July 31, 2023","title":"ì§€ì†ì  ë°°í¬(CD)ë¥¼ GitHub Self Hosted Runnerì™€ Docker Hubë¡œ í•´ë³´ì","tags":["docker","github actions","self-hosted"]},"rawMarkdownBody":"\n## ğŸ’¬ ê°œìš”\n\në¨¼ì € ì§€ì†ì  ë°°í¬(CD, Continuous Deploy)ë¥¼ êµ¬ì¶•í•˜ê¸° ìœ„í•´ì„œ ë‹¤ìŒê³¼ ê°™ì€ ê¸°ìˆ ì„ ì„ íƒí–ˆìŠµë‹ˆë‹¤.\n\n-   GitHub Self Hosted Runner : í˜„ì¬ í´ë¼ìš°ë“œ ìƒí™©ì— ì í•©í•˜ë‹¤.\n-   Docker Hub : EC2 ë‚´ë¶€ì—ì„œ ìŠ¤í”„ë§ í”„ë¡œì íŠ¸ê°€ ë¹Œë“œ(build)ëœ ì´ë¯¸ì§€(Image)ë¥¼ ê°€ì ¸ì™€ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.\n\n![image](https://github.com/2023-baton/2023-baton.github.io/assets/82203978/ae049740-d32f-4aac-9d4d-8c20ba042e11)\n\n<br>\n<br>\n<br>\n\n## **âœ… GitHub Self Hosted Runner**ë¥¼ ì„ íƒí•œ ì´ìœ \n\ní˜„ì¬ ì§„í–‰í•˜ê³  ìˆëŠ” í”„ë¡œì íŠ¸ì˜ í´ë¼ìš°ë“œ í™˜ê²½ì— ê°€ì¥ ì í•©í•˜ë‹¤ê³  ëŠê¼ˆë‹¤.\n\nì‚¬ìš©í•˜ê³  ìˆëŠ” EC2ì˜ vpc í™˜ê²½ì€ ì™¸ë¶€ì—ì„œ ë‚´ë¶€ë¡œ ë“¤ì–´ì˜¬ ìˆ˜ ìˆëŠ” ipì™€ portê°€ ì œí•œëœ ìƒíƒœì˜€ë‹¤.\n\në•Œë¬¸ì— GitHub Actionsì˜ ì›Œí¬í”Œë¡œìš°(workflow)ë¥¼ ì´ìš©í•˜ì—¬ scp ëª…ë ¹ì–´ë¡œ ë¹Œë“œëœ jarë¥¼ ì „ì†¡í•˜ê±°ë‚˜ AWSì— ì ‘ê·¼í•´ì„œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì§ì ‘ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ ë¶ˆê°€ëŠ¥í–ˆë‹¤.\n\nì¦‰, EC2 ë‚´ë¶€ì—ì„œ ì§€ì†ì  ë°°í¬ë¥¼ ì§„í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” EC2 ë‚´ë¶€ì—ì„œ ì™¸ë¶€ë¡œ ì ‘ê·¼í•˜ëŠ” ë°©ì‹ì´ í•„ìš”í–ˆë‹¤.\n\nì´ ë•Œ ì‚¬ìš©í•´ë³¸ ê²½í—˜ì´ ìˆëŠ” ë„êµ¬ëŠ” ë‘ ê°€ì§€ì˜€ëŠ”ë°\n\në°”ë¡œ Jenkinsì™€ GitHub Self Hosted Runner ì˜€ê³  ë‚˜ëŠ” í›„ìì¸ GitHubë¥¼ ì„ íƒí–ˆë‹¤.\n\nJenkinsì— ë¹„í•´ ëŸ¬ë‹ ì»¤ë¸Œê°€ ì ê³  GitHubì™€ ì—°ë™ì´ ì˜ë˜ì–´ ìˆì–´ ë¬¸ì œ í•´ê²°ì´ ì‰½ê¸° ë•Œë¬¸ì´ë‹¤.\n\nJenkinsê°€ í•„ìš”í•œ ìì›ë³´ë‹¤ GitHub Self Hosted Runnerê°€ ë” ì ë‹¤ëŠ” ì¥ì ì„ ê°€ì§€ê³  ìˆë‹¤.\n\në˜í•œ ê°™ì€ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ê³  ìˆëŠ” íŒ€ì›ë“¤ì—ê²Œ GitHubë¥¼ ì„¤ëª…í•˜ì—¬ ê¸°ìˆ ì„ ì „íŒŒí•˜ëŠ” ê²ƒì´ Jenkins ë³´ë‹¤ ë” ì‰½ë‹¤ëŠ” ê²ƒë„ ì„ íƒí•œ ì´ìœ  ì¤‘ í•˜ë‚˜ë‹¤.\n\n<br>\n<br>\n<br>\n\n## **âœ… ğŸ³ Docker Hub**ë¥¼ ì„ íƒí•œ ì´ìœ \n\nAWSì—ì„œ EC2ë¥¼ ë„ì–´ ì‚¬ìš©í•˜ê³  ìˆëŠ” ìƒíƒœì—ì„œ ìŠ¤í”„ë§ í”„ë¡œì íŠ¸ë¥¼ í´ë¡  ë°›ì•„ ë¹Œë“œí•˜ëŠ” ê²½ìš° EC2 ë©”ëª¨ë¦¬ê°€ ë¶€ì¡±í•´ì§ˆ ìˆ˜ë„ ìˆë‹¤.\n\nì´ëŸ¬í•œ ìœ„í—˜ì„±ì„ ì¤„ì´ê¸° ìœ„í•´ì„œ ë¯¸ë¦¬ ë¹Œë“œëœ jar íŒŒì¼ì„ ê°€ì ¸ì™€ì„œ ì‹¤í–‰ì‹œí‚¤ë„ë¡ í–ˆë‹¤.\n\ní•˜ì§€ë§Œ í˜„ì¬ í´ë¼ìš°ë“œ í™˜ê²½ì€ ë¹Œë“œëœ jarë¥¼ ë°”ë¡œ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ë‹¤.\n\nAWSì—ì„œ ì œê³µí•˜ëŠ” S3ì™€ ê°™ì€ ê¸°ìˆ ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  jar íŒŒì¼ì„ ë‹¤ìš´ë°›ì•„ ì‹¤í–‰ì‹œì¼œì•¼ í–ˆë‹¤.\n\në˜í•œ ì €í¬ëŠ” í•˜ë‚˜ì˜ EC2ì—ì„œ React, Nginx, Springì„ ê°™ì´ ë„ì›Œ ë†“ì„ê±°ê¸° ë•Œë¬¸ì— ì´í›„ì— ê¼¬ì´ëŠ” ê²ƒì„ ë°©ì§€í•˜ê¸° ìœ„í•´ í™˜ê²½ì„ ë…ë¦½ì ìœ¼ë¡œ ê°€ì ¸ê°ˆ ìˆ˜ ìˆì—ˆìœ¼ë©´ í–ˆë‹¤.\n\nì´ëŸ¬í•œ ìƒí™©ì„ ë´¤ì„ ë•Œ ì»¨í…Œì´ë„ˆë¡œ í™˜ê²½ì„ ì œê³µí•´ì£¼ë©´ì„œ ë¹Œë“œëœ ì´ë¯¸ì§€(image)ë¥¼ í’€(pull)ë°›ì•„ ì„œë²„ë¥¼ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆëŠ” ë„ì»¤(ğŸ³ Docker)ë¥¼ ì„ íƒí•˜ê¸°ë¡œ í–ˆë‹¤.\n\n> ê¸°ìˆ ì´ ì •í•´ì¡Œê³  ëŒ€ëµì ì¸ í”Œë¡œìš°ë„ ë‚˜ì™”ë‹¤.  \n> ğŸ¤” ê·¸ë ‡ë‹¤ë©´ ì´ì œ ë¬´ìŠ¨ ì¼ì„ í•´ì•¼ í• ê¹Œ?\n\nì´ë¡ ì ìœ¼ë¡œ í˜„ì¬ í”Œë¡œìš°ì— ëŒ€í•´ ì´í•´ëŠ” í•  ìˆ˜ ìˆì—ˆì§€ë§Œ ì‹¤ì œë¡œ ê¸°ìˆ ì„ ì‚¬ìš©í•´ë³¸ì ì€ ì—†ê¸° ë•Œë¬¸ì— ë¨¼ì € ê¸°ì¡´ í”Œë¡œìš°ë¥¼ ë‹¤ì‹œ í•œ ë²ˆ ì •ë¦¬í•˜ë©´ì„œ í•´ì•¼í•  ì¼ì„ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¡œ ë§Œë“¤ì—ˆë‹¤.\n\nğŸ’¬ ë¨¼ì € í”Œë¡œìš°ë¥¼ ì •ë¦¬í•´ë³´ì.\n\n-   GitHub Repositoryì˜ ë¸Œëœì¹˜ì— push ë˜ì—ˆì„ ë•Œ GitHubê°€ ì¸ì§€í•˜ê³  ìŠ¤í”„ë§ í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œ(build)í•œë‹¤.\n-   ë¹Œë“œëœ jaríŒŒì¼ì„ ë„ì»¤ ì´ë¯¸ì§€(Docker Image)ë¡œ ë§Œë“¤ì–´ ë„ì»¤ í—ˆë¸Œ(Docker Hub)ì— pushí•œë‹¤.\n-   EC2ì— ë„ìš´ GitHub Self Hosted Runnerê°€ ë„ì»¤ í—ˆë¸Œê°€ ì—…ë°ì´íŠ¸ ë˜ì—ˆë‹¤ëŠ” ê²ƒì„ í™•ì¸í•˜ê³  ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ìë™ìœ¼ë¡œ pullí•œë‹¤.\n-   EC2ì— ìˆëŠ” ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ì»¨í…Œì´ë„ˆë¡œ ë„ì›Œ ìŠ¤í”„ë§ ì„œë²„ë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤.\n\ní”Œë¡œìš°ë¥¼ ì‘ì„±í•˜ê³  íë¦„ì€ ì´í•´ ë˜ì—ˆë‹¤. ì´ì œ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ë©´ì„œ êµ¬ì²´í™” ì‹œì¼œë³´ì.\n\nâœ”ï¸ ì²´í¬ë¦¬ìŠ¤íŠ¸\n\n\\- ê¹ƒí—ˆë¸Œê°€ ì œê³µí•˜ëŠ” í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œ í•  ì¼\n\nÂ  - GitHub Repository í´ë¡ \n\nÂ  - JDK 17 í™˜ê²½ ì„¤ì •\n\nÂ  - Gradle Build\n\nÂ  - Docker Buildx\n\nÂ  - Docker Login\n\nÂ  - Docker Image Build\n\nÂ  - Docker Hub Push\n\n\\- EC2 ë‚´ë¶€ì— ìˆëŠ” GitHub Self Hosted Runnerê°€ í•  ì¼Â \n\nÂ  - Docker Login\n\nÂ  - Docker Pull\n\nÂ  - Docker Run\n\nì´ì œ ì´ íë¦„ì„ ë”°ë¼ê°€ë³´ì.\n\n<br>\n<br>\n<br>\n\n## ğŸŸ© ê¹ƒí—ˆë¸Œê°€ ì œê³µí•˜ëŠ” í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œ í•  ì¼\n\në¨¼ì € '**ê¹ƒí—ˆë¸Œê°€ ì œê³µí•˜ëŠ” í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œ í•  ì¼**'ì„ ëë‚´ë³´ì.\n\n### 01\\. on: push : branches: \\[\"dev/BE\"\\]\n\nworkflowë¥¼ íŠ¸ë¦¬ê±°(trigger)í•˜ê¸° ìœ„í•´ì„œëŠ” ì´ë²¤íŠ¸(event)ë¥¼ ë°œìƒì‹œì¼œì•¼ í•œë‹¤.\n\ní˜„ì¬ 'dev/BE' ë¸Œëœì¹˜ì— push ì´ë²¤íŠ¸ê°€ ë°œìƒí–ˆì„ ë•Œ workflowê°€ ë™ì‘í•´ì•¼ í•œë‹¤.\n\nê¹ƒí—ˆë¸Œì—ì„œëŠ” ì´ëŸ¬í•œ push ì´ë²¤íŠ¸ê°€ ë°œìƒí–ˆì„ ë•Œ workflowê°€ íŠ¸ë¦¬ê±°í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•˜ëŠ” ëª…ë ¹ì–´ë¥¼ ë¬¸ì„œì— ì •ë¦¬í•´ë‘ì—ˆë‹¤.\n\nì‚¬ìš©ì ì…ì¥ì—ì„œëŠ” workflowì— ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•˜ë©´ ëœë‹¤.\n\n```\non:\n  push:\n    branches: [ \"dev/BE\" ]\n```\n\nÂ [ì›Œí¬í”Œë¡œë¥¼ íŠ¸ë¦¬ê±°í•˜ëŠ” ì´ë²¤íŠ¸ - GitHub Docs](https://docs.github.com/ko/actions/using-workflows/events-that-trigger-workflows#push)\n\n<br>\n<br>\n\n### 02\\. jobs: build: runs-on: ubuntu-latest\n\nworkflowë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì„ ëŸ¬ë„ˆ(runner)ë¼ê³  í•œë‹¤.\n\nê·¸ë¦¬ê³  workflow ë‚´ë¶€ì— ì‘ì—…(job)ë“¤ì„ ì§„í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” ìš´ì˜ì²´ì œì™€ ê°™ì€ í™˜ê²½ì„ ë§Œë“¤ì–´ì¤˜ì•¼ í•œë‹¤.\n\nMacOS, Window í™˜ê²½ì—ì„œ ì‘ì—…ì„ ì§„í–‰í•  ìˆ˜ ìˆì§€ë§Œ EC2ê°€ Linuxë¡œ ë„ì–´ì ¸ìˆê¸° ë•Œë¬¸ì— Ubuntuë¥¼ ì´ìš©í•˜ê¸°ë¡œ í•œë‹¤.\n\nworkflowì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•˜ë©´ ëœë‹¤.\n\n```\njobs:\n  build:\n    runs-on: ubuntu-latest\n```\n\nÂ [GitHub í˜¸ìŠ¤íŒ… ì‹¤í–‰ê¸° ì •ë³´ - GitHub Docs](https://docs.github.com/ko/actions/using-github-hosted-runners/about-github-hosted-runners)\n\n<br>\n<br>\n\n### 03\\. uses: actions/checkout\n\nGitHub Actionsë¥¼ ì‚¬ìš©í•´ì„œ ìŠ¤í”„ë§ í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œí•˜ë ¤ë©´ ë¨¼ì € ê¸°ë³¸ì ì¸ íŒŒì¼ì„ í´ë¡ ë°›ì•„ì•¼ í•œë‹¤.\n\nì´ ìŠ¤í…ì„ í•˜ë‚˜ì˜ ì•¡ì…˜(Action)ìœ¼ë¡œ GitHub Marketplaceì—ì„œ ì œê³µí•˜ê³  ìˆë‹¤.\n\nworkflowì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•˜ë©´ ëœë‹¤.\n\n```\non:\n  push:\n    branches: [ \"dev/BE\" ]\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n\n\n# ìœ„ì— ì íŒ ë‚´ìš©ì€ depthë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•´ ë”°ë¡œ ë¶„ë¦¬í•˜ì§€ ì•Šì•˜ë‹¤.\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v3\n```\n\nÂ [Checkout - GitHub Marketplace](https://github.com/marketplace/actions/checkout)\n\n<br>\n<br>\n\n### 04\\. uses:Â actions/setup-java\n\nJDK 17ë¥¼ ì‚¬ìš©í•˜ê³  ìˆëŠ” ìŠ¤í”„ë§ í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œí•˜ê¸° ìœ„í•´ì„œ JDKë¥¼ ì„¤ì¹˜í•˜ëŠ” ì•¡ì…˜ì„ ì‚¬ìš©í•œë‹¤.\n\nworkflowì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•˜ë©´ ëœë‹¤.\n\n```\n      - name: Set up JDK 17\n        uses: actions/setup-java@v3\n        with:\n          java-version: '17'\n          distribution: 'corretto'\n```\n\nÂ [Setup Java JDK - GitHub Marketplace](https://github.com/marketplace/actions/setup-java-jdk)\n\n<br>\n<br>\n\n### 05\\. uses: gradle/gradle-build-action\n\nGradleë¡œ ìŠ¤í”„ë§ í”„ë¡œì íŠ¸ë¥¼ ê´€ë¦¬í•˜ê³  ìˆë‹¤. Gradleì„ í†µí•´ì„œ í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œí•˜ë ¤ê³  í•œë‹¤.\n\nÂ workflowì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•˜ë©´ ëœë‹¤.\n\n```\n      - name: Build with Gradle\n        uses: gradle/gradle-build-action@v2.6.0\n      - name: Execute Gradle build\n        run: |\n          cd backend/baton\n          ./gradlew build\n```\n\nÂ [Gradle Build Action - GitHub Marketplace](https://github.com/marketplace/actions/gradle-build-action)\n\n<br>\n<br>\n\n### 06\\. uses: docker/login-action\n\nDocker Hubì— ë§Œë“  ì´ë¯¸ì§€ë¥¼ í‘¸ì‰¬í•˜ê¸° ìœ„í•´ì„œ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•œë‹¤.\n\nDockerì— ë¡œê·¸ì¸í•˜ê³  ê³„ì •ì—ì„œ í† í°ì„ ë§Œë“¤ì–´ì•¼ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.\n\nì•„ë˜ëŠ” ì•„ì§ í† í°ì„ ë§Œë“¤ì§€ ì•Šì€ ìƒíƒœì˜ í˜ì´ì§€ë‹¤.\n\n![image](https://github.com/2023-baton/2023-baton.github.io/assets/82203978/b5684ce0-98a7-4a58-af17-8f7829338707)\n\ní† í°ì„ ë§Œë“¤ì–´ì„œ GitHub Secretì— ë“±ë¡í•´ì„œ workflowì—ì„œ ì‚¬ìš©í•˜ë„ë¡ ì„¤ì •í–ˆë‹¤.\n\n![image](https://github.com/2023-baton/2023-baton.github.io/assets/82203978/42caa09a-f2b3-4e0d-b778-b760d999555d)\n\nì°¸ê³ ë¡œÂ  workflowì—ì„œ secretì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” \\`${{ secrets.ì´ë¦„ }}\\`ì™€ ê°™ì€ í˜•ì‹ìœ¼ë¡œ ì‘ì„±í•˜ë©´ ëœë‹¤.\n\nworkflowì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•˜ë©´ ëœë‹¤.\n\n```\n      - name: Login to Docker Hub\n        uses: docker/login-action@v2.2.0\n        with:\n          username: ${{ secrets.DOCKERHUB_DEV_USERNAME }}\n          password: ${{ secrets.DOCKERHUB_DEV_TOKEN }}\n```\n\nÂ [Docker Hub Container Image Library](https://hub.docker.com/)\n\nÂ [Docker Login - GitHub Marketplace](https://github.com/marketplace/actions/docker-login)\n\n<br>\n<br>\n\n### 07\\. run: docker build\n\nDocker Imageë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œ docker build ëª…ë ¹ì–´ë¥¼ ì‘ì„±í•œë‹¤.\n\ní”„ë¡œì íŠ¸ ìµœìƒë‹¨ íŒ¨í‚¤ì§€ì— ë§Œë“¤ì–´ ë†“ì€ Dockerfileì„ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ ëª…ì‹œí–ˆë‹¤.\n\nDockerfile ë‚´ìš©ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.  \nEC2 í™˜ê²½ì€ arm64v8ì´ë‹¤.\n\nJDKëŠ” Corretto 17ì„ ì´ìš©í–ˆë‹¤.\n\njarë¥¼ ë³µì‚¬ê³  ìŠ¤í”„ë§ í”„ë¡œí•„ í™˜ê²½ ë³€ìˆ˜ë¥¼ devë¡œ ë‘ê³  ìŠ¤í”„ë§ ì„œë²„ë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤.\n\n```\nFROM arm64v8/amazoncorretto:17\n\nWORKDIR /app\n\nCOPY ./build/libs/baton-0.0.1-SNAPSHOT.jar /app/baton.jar\n\nCMD [\"java\", \"-jar\", \"-Dspring.profiles.active=dev\", \"baton.jar\"]\n```\n\nworkflowì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•˜ë©´ ëœë‹¤.\n\n```\n      - name: Docker Image Build\n        run: |\n          cd backend/baton\n          docker build --platform linux/arm64/v8 -t 2023baton/2023baton -f Dockerfile-dev .\n```\n\n### 08\\. run: docker push\n\nì´ì œ ì´ë¯¸ì§€ë¡œ ë§Œë“  ìŠ¤í”„ë§ í”„ë¡œì íŠ¸ë¥¼ Docker Hubì— pushí•˜ì.\n\në¨¼ì € Dockerì—ì„œ Repositoryë¥¼ ë§Œë“¤ì.\n\nworkflowì— \\`docker push 2023baton/2023baton\\` ì´ë¼ëŠ” ëª…ë ¹ì–´ê°€ ëª…ì‹œë˜ì–´ ìˆëŠ”ë°\n\n\\`docker push {docker\\_username}/{docker\\_repository\\_name}\\` í˜•íƒœë¡œ ëª…ì‹œí•˜ë©´ ëœë‹¤.\n\nworkflowì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•˜ë©´ ëœë‹¤.\n\n```\n      - name: Docker Hub Push\n        run: docker push 2023baton/2023baton\n```\n\n### 09\\. \\`**ê¹ƒí—ˆë¸Œê°€ ì œê³µí•˜ëŠ” í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œ í•  ì¼\\`** workflow ì¢…í•©\n\n![image](https://github.com/2023-baton/2023-baton.github.io/assets/82203978/5140c7d1-362d-4ac7-a106-abd3dc646f65)\n\n01 ~ 08 ê¹Œì§€ ì†Œê°œí•œ ìŠ¤í…ë“¤ì„ í•©ì³ í•˜ë‚˜ì˜ ì›Œí¬í”Œë¡œìš°ë¥¼ ì‘ì„±í•˜ë©´ ì•„ë˜ì™€ ê°™ë‹¤.\n\n```\non:\n  push:\n    branches: [ \"dev/BE\" ]\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v3\n\n      - name: Set up JDK 17\n        uses: actions/setup-java@v3\n        with:\n          java-version: '17'\n          distribution: 'corretto'\n\n      - name: Build with Gradle\n        uses: gradle/gradle-build-action@v2.6.0\n      - name: Execute Gradle build\n        run: |\n          cd backend/baton\n          ./gradlew build\n\n      - name: Login to Docker Hub\n        uses: docker/login-action@v2.2.0\n        with:\n          username: ${{ secrets.DOCKERHUB_DEV_USERNAME }}\n          password: ${{ secrets.DOCKERHUB_DEV_TOKEN }}\n\n      - name: Docker Image Build\n        run: |\n          cd backend/baton\n          docker build --platform linux/arm64/v8 -t 2023baton/2023baton -f Dockerfile-dev .\n\n      - name: Docker Hub Push\n        run: docker push 2023baton/2023baton\n```\n\n<br>\n<br>\n<br>\n\n## ğŸŸ© EC2 ë‚´ë¶€ì— ìˆëŠ” GitHub Self Hosted Runnerê°€ í•  ì¼\n\nì´ì œ Docker Hubì— ìŠ¤í”„ë§ ì´ë¯¸ì§€ê¹Œì§€ ì˜¬ë¼ê°€ ìˆë‹¤.\n\nEC2ì— ìˆëŠ” GitHub Self Hosted Runnerê°€ Docker Hubì— ì´ë¯¸ì§€ë¥¼ pullí•´ì„œ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ë„ë¡ workflowë¥¼ ì‘ì„±í•˜ì.\n\n### 01\\. GitHub Self Hosted Runner ì„¤ì¹˜\n\nRepositoryì˜ Settinggsì— ë“¤ì–´ê°€ Actions íƒ­ì— Runnersë¥¼ ë“¤ì–´ê°€ì„œ \\`New self-hosted runner\\` ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ëª…ë ¹ì–´ë¥¼ ë³´ì—¬ì¤€ë‹¤.\n\n![image](https://github.com/2023-baton/2023-baton.github.io/assets/82203978/d29a74d2-cd05-482d-9570-8daff8d0e414)\n\në‹¤ìŒê³¼ ê°™ì´ Runner Imageë¥¼ ê³ ë¥¼ ìˆ˜ ìˆê³  ë‹¤ìš´ë¡œë“œ, ì„¤ì •, ì‹¤í–‰ ë“± ì˜ ì •ë³´ë¥¼ ì „ë¶€ ì œê³µí•´ì£¼ê¸° ë•Œë¬¸ì— EC2ì— ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ëì´ë‹¤.\n\n![image](https://github.com/2023-baton/2023-baton.github.io/assets/82203978/9f8cdb9e-0b19-4027-bf66-4ee4350e3bd9)\n\n### 02\\. runs-on: \\[self-hosted\\]\n\nEC2ì— GitHub Self Hosted Runnerë¥¼ ì„¤ì¹˜í–ˆë‹¤ë©´ workflowë¥¼ ì‘ì„±í•´ì£¼ì.\n\n\\`self-hosted\\`ë¼ê³  ì‘ì„±í•˜ë©´ ìš°ë¦¬ê°€ ë°©ê¸ˆ ë§Œë“  runnerë¥¼ ì„ íƒí•˜ê²Œ ëœë‹¤.\n\në§Œì•½ ë‹¤ìŒê³¼ ê°™ì´ Self-Hosted Runnerê°€ ë‘ ê°œ ì´ìƒì´ë¼ë©´ ë¼ë²¨(label)ì„ ë„£ì–´ì„œ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤.\n\n![image](https://github.com/2023-baton/2023-baton.github.io/assets/82203978/d18331d0-15bf-4b3c-ac19-817065076ac7)\n\në‹¤ìŒê³¼ ê°™ì€ ìƒí™©ì—ì„œ ë‚˜ëŠ” deploy í™˜ê²½ì—ì„œëŠ” deployë¼ëŠ” ë¼ë²¨ì„ ë¶™ì˜€ë‹¤.\n\n![image](https://github.com/2023-baton/2023-baton.github.io/assets/82203978/b5340890-b187-44d1-bc0a-c9a86e08e93b)\n\nrunnerê°€ 1ê°œ ì¼ ë•ŒëŠ” workflowëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.\n\n```\njobs:\n  dev-deploy:\n    runs-on: self-hosted\n```\n\nrunnerê°€ 2ê°œ ì´ìƒì¼ ë•ŒëŠ” êµ¬ë¶„ì§€ì„ ìˆ˜ ìˆì–´ì•¼ ë˜ê¸° ë•Œë¬¸ì— ì•„ë˜ì™€ ê°™ì´ ë¼ë²¨ê¹Œì§€ ëª…ì‹œí•´ì£¼ë©´ ëœë‹¤.\n\n```\n# Self-Hosted Runner : dev\njobs:\n  dev-deploy:\n    runs-on: [self-hosted, Linux, ARM64]\n```\n\n```\n# Self-Hosted Runner : deploy \njobs:\n  dev-deploy:\n    runs-on: [self-hosted, Linux, ARM64, deploy]\n```\n\ní˜„ì¬ ì›Œí¬í”Œë¡œìš°ì—ì„œ ì‚¬ìš©í•˜ëŠ” Self-Hosted RunnerëŠ” devë¼ëŠ” ê²ƒì„ ìƒê°í•´ì¤¬ìœ¼ë©´ ì¢‹ê² ë‹¤.\n\n### 03\\. needs: build\n\nì´ì „ì— Docker Hubì— ì´ë¯¸ì§€ë¥¼ pushí•˜ëŠ” ì‘ì—…ì´ ìˆì—ˆë‹¤.\n\nê·¸ë¦¬ê³  ì§€ê¸ˆ ì‘ì„±í•˜ê³  ìˆëŠ” ì‘ì—…ì€ EC2ì—ì„œ Docker Hub ì´ë¯¸ì§€ë¥¼ pull ë°›ì•„ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰ì‹œí‚¤ëŠ” ê²ƒì´ë‹¤.\n\nì´ ë•Œ ìˆœì„œë¥¼ ì •í•´ì£¼ì§€ ì•Šìœ¼ë©´ ì—…ë°ì´íŠ¸ ë˜ì§€ ì•Šì€ ì´ë¯¸ì§€ë¥¼ ë°›ì•„ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ë„ ìˆë‹¤.\n\nê·¸ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ needsë¼ëŠ” í‚¤ì›Œë“œë¥¼ ë‹¬ì•„ buildë¼ëŠ” ì‘ì—…ì´ ëë‚˜ë©´ ë‹¤ìŒ ì‘ì—…ì´ ì§„í–‰ë˜ë„ë¡ ë§Œë“¤ì.\n\nworkflowì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•˜ë©´ ëœë‹¤.\n\n```\non:\n  push:\n    branches: [ \"dev/BE\" ]\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n\n  deploy:\n    runs-on: [self-hosted, Linux, ARM64]\n    needs: build\n```\n\n### 04\\. docker pull\n\nì´ì œ Docker Hubì— ë¡œê·¸ì¸í•˜ì—¬ ì´ë¯¸ì§€ë¥¼ pullí•˜ë„ë¡ í•˜ì.\n\nDocker Hubì— 2023baton ë ˆí¬ì§€í„°ë¦¬ì—ì„œ 2023baton ì´ë¯¸ì§€ë¥¼Â  pullí•œë‹¤.\n\nworkflowëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•˜ë©´ ëœë‹¤.\n\n```\n    steps:\n      - name: Pull Latest Docker Image\n        run: |\n          sudo docker login --username ${{ secrets.DOCKERHUB_DEV_USERNAME }} --password ${{ secrets.DOCKERHUB_DEV_TOKEN }}\n          sudo docker pull 2023baton/2023baton:latest\n```\n\n### 05\\. docker run\n\nDocker Imageê°€ pull ë°›ì•„ ìµœì‹  ìƒíƒœê°€ ëœ ê²½ìš° ìŠ¤í”„ë§ Containerë¥¼ ë©ˆì¶”ê³  ì‚­ì œí•œë‹¤.\n\nê·¸ë¦¬ê³  ë‹¤ì‹œ ìƒˆë¡œìš´ Containerë¥¼ ë„ìš°ë„ë¡ í•œë‹¤.\n\nworkflowëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•˜ë©´ ëœë‹¤.\n\n```\n    steps:\n      - name: Pull Latest Docker Image\n        run: |\n          sudo docker login --username ${{ secrets.DOCKERHUB_DEV_USERNAME }} --password ${{ secrets.DOCKERHUB_DEV_TOKEN }}\n          if sudo docker inspect spring-baton &>/dev/null; then\n            sudo docker stop spring-baton\n            sudo docker rm -f spring-baton\n          fi\n          sudo docker pull 2023baton/2023baton:latest\n\n      - name: Docker Run\n        run: |\n          sudo docker run --name spring-baton -p 8080:8080 2023baton/2023baton:latest 1>> build.log 2>> error.log &name: dev/BE CD on Push\n```\n\n#### 06\\. \\`**EC2 ë‚´ë¶€ì— ìˆëŠ” GitHub Self Hosted Runnerê°€ í•  ì¼**\\` worflow ì¢…í•©\n\n![image](https://github.com/2023-baton/2023-baton.github.io/assets/82203978/675fcde0-5e8e-4bab-aca5-d47a262329f4)\n\n```\n  deploy:\n    runs-on: [self-hosted, Linux, ARM64]\n    needs: build\n\n    steps:\n      - name: Pull Latest Docker Image\n        run: |\n          sudo docker login --username ${{ secrets.DOCKERHUB_DEV_USERNAME }} --password ${{ secrets.DOCKERHUB_DEV_TOKEN }}\n          if sudo docker inspect spring-baton &>/dev/null; then\n            sudo docker stop spring-baton\n            sudo docker rm -f spring-baton\n          fi\n          sudo docker pull 2023baton/2023baton:latest\n\n      - name: Docker Run\n        run: |\n          sudo docker run --name spring-baton -p 8080:8080 2023baton/2023baton:latest 1>> build.log 2>> error.log &\n```\n\n<br>\n<br>\n<br>\n\n## ğŸŸ© ìµœì¢… ì›Œí¬í”Œë¡œìš°\n\n```\nname: dev/BE CD on Push\n\non:\n  push:\n    branches: [ \"dev/BE\" ]\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v3\n        with:\n          token: ${{ secrets.SUBMODULE_BE_TOKEN }}\n          submodules: recursive\n\n      - name: Set up JDK 17\n        uses: actions/setup-java@v3\n        with:\n          java-version: '17'\n          distribution: 'corretto'\n\n      - name: Build with Gradle\n        uses: gradle/gradle-build-action@v2.6.0\n      - name: Execute Gradle build\n        run: |\n          cd backend/baton\n          ./gradlew build\n\n      - name: Login to Docker Hub\n        uses: docker/login-action@v2.2.0\n        with:\n          username: ${{ secrets.DOCKERHUB_DEV_USERNAME }}\n          password: ${{ secrets.DOCKERHUB_DEV_TOKEN }}\n\n      - name: Docker Image Build\n        run: |\n          cd backend/baton\n          docker build --platform linux/arm64/v8 -t 2023baton/2023baton -f Dockerfile-dev .\n\n      - name: Docker Hub Push\n        run: docker push 2023baton/2023baton\n\n  deploy:\n    runs-on: [self-hosted, Linux, ARM64]\n    needs: build\n\n    steps:\n      - name: Pull Latest Docker Image\n        run: |\n          sudo docker login --username ${{ secrets.DOCKERHUB_DEV_USERNAME }} --password ${{ secrets.DOCKERHUB_DEV_TOKEN }}\n          if sudo docker inspect spring-baton &>/dev/null; then\n            sudo docker stop spring-baton\n            sudo docker rm -f spring-baton\n          fi\n          sudo docker pull 2023baton/2023baton:latest\n\n      - name: Docker Compose\n        run: |\n          sudo docker run --name spring-baton -p 8080:8080 2023baton/2023baton:latest 1>> build.log 2>> error.log &\n```\n\nì´ì œ ë¸Œëœì¹˜ì— push í•  ë•Œ ë§ˆë‹¤ ìƒˆë¡œìš´ ì´ë¯¸ì§€ê°€ Docker Hubì— push ë˜ê³  Self-hostedëŠ” pull ë°›ì•„ ìƒˆë¡œìš´ ì»¨í…Œì´ë„ˆë¥¼ ë„ìš´ë‹¤.\n"},{"excerpt":"ì•ˆë…•í•˜ì„¸ìš” ì´ë²ˆì— ë°”í†¤ í”„ë¡œì íŠ¸ë¥¼ ê¸°ì´ˆ ì„¸íŒ…í•˜ëŠ” ì‹œê°„ì„ ê°€ì¡ŒëŠ”ë°ìš”. ê·¸ ì¤‘ dockerë¡œ DBë¥¼ ê´€ë¦¬í•˜ëŠ” ë¶€ë¶„ì´ ê¸°ì–µì— ë‚¨ì•„ ê¸€ë¡œ ê¸°ë¡í•´ë³´ë ¤í•©ë‹ˆë‹¤. dockerë¡œ DBë¥¼ ê´€ë¦¬í•˜ê²Œ ëœ ì´ìœ  1. ì¼ê´€ëœ í™˜ê²½ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ë©´ ê°œë°œ, ë¡œì»¬, ìš´ì˜ í™˜ê²½ì—ì„œ ëª¨ë‘ ë™ì¼í•œ ì´ë¯¸ì§€ë¥¼ ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì¦‰, ëª¨ë“  ë°ì´í„°ë² ì´ìŠ¤ì˜ í™˜ê²½ì„ ë™ì¼í•˜ê²Œ ìœ ì§€í•  ìˆ˜ ìˆê³ â€¦","fields":{"slug":"/first/"},"frontmatter":{"date":"July 20, 2023","title":"ğŸ³ ë„ì»¤ë¡œ DB ê´€ë¦¬í•˜ê¸°","tags":["docker","database"]},"rawMarkdownBody":"\nì•ˆë…•í•˜ì„¸ìš” ì´ë²ˆì— ë°”í†¤ í”„ë¡œì íŠ¸ë¥¼ ê¸°ì´ˆ ì„¸íŒ…í•˜ëŠ” ì‹œê°„ì„ ê°€ì¡ŒëŠ”ë°ìš”. ê·¸ ì¤‘ dockerë¡œ DBë¥¼ ê´€ë¦¬í•˜ëŠ” ë¶€ë¶„ì´ ê¸°ì–µì— ë‚¨ì•„ ê¸€ë¡œ ê¸°ë¡í•´ë³´ë ¤í•©ë‹ˆë‹¤.\n\n## dockerë¡œ DBë¥¼ ê´€ë¦¬í•˜ê²Œ ëœ ì´ìœ \n### 1. ì¼ê´€ëœ í™˜ê²½\në„ì»¤ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ë©´ ê°œë°œ, ë¡œì»¬, ìš´ì˜ í™˜ê²½ì—ì„œ ëª¨ë‘ ë™ì¼í•œ ì´ë¯¸ì§€ë¥¼ ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì¦‰, ëª¨ë“  ë°ì´í„°ë² ì´ìŠ¤ì˜ í™˜ê²½ì„ ë™ì¼í•˜ê²Œ ìœ ì§€í•  ìˆ˜ ìˆê³  í™˜ê²½ ë³€í™”ê°€ ìˆë‹¤ë©´ ë™ì¼í•˜ê²Œ í™˜ê²½ì„ ë³€ê²½ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\në˜í•œ ë„ì»¤ ì»´í¬ì¦ˆë¥¼ ì´ìš©í•˜ì—¬ ë¡œì»¬ì—ì„œë„ ë™ë£Œë“¤ê°„ ê°™ì€ í™˜ê²½ì„ êµ¬ì„±í•˜ì—¬ DBë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n### 2. í™˜ê²½ ì¶©ëŒ ë°©ì§€\nìš°ì•„í•œí…Œí¬ì½”ìŠ¤ì—ì„œ DBë¥¼ ìœ„í•œ ec2 ì¸ìŠ¤í„´ìŠ¤ëŠ” 1ê°œë§Œ ì œê³µë˜ì—ˆìŠµë‹ˆë‹¤.\në‚˜ì¤‘ì— mysql ë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ë¥¸ dbë¥¼ ì¶”ê°€í•˜ê²Œ ë˜ëŠ” ê²½ìš°ì— ì¸ìŠ¤í„´ìŠ¤ ë‚´ë¶€ì—ì„œ í™˜ê²½ì´ ì–½íìˆ˜ë„ ìˆê² ë‹¤ëŠ” ìƒê°ì„ í–ˆìŠµë‹ˆë‹¤.\në§Œì•½ ë„ì»¤ë¥¼ ì´ìš©í•˜ì—¬ ì»¨í…Œì´ë„ˆë¥¼ ë¶„ë¦¬í•˜ê²Œ ëœë‹¤ë©´ í™˜ê²½ì´ ì–½í ì¼ì´ ì—†ê³ , ë” ì•ˆì •ì ì¸ ìš´ì˜ì´ ê°€ëŠ¥í•˜ë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.\n\n### 3. ì†ì‰¬ìš´ ìŠ¤ì¼€ì¼ë§\nì„œë¹„ìŠ¤ê°€ ì»¤ì§€ê²Œë˜ë©´ íŠ¸ë˜í”½ì´ ëŠ˜ì–´ë‚˜ê³  ë¶€í•˜ê°€ ë°œìƒí•  ìˆ˜ ìˆëŠ”ë°ìš”.\nì´ë•Œ ë„ì»¤ë¥¼ ì´ìš©í•˜ë©´ ì»¨í…Œì´ë„ˆë¥¼ í•„ìš”í•œ ì‹œì ì— ë¹ ë¥´ê²Œ í™•ì¥í•˜ê±°ë‚˜ ì¶•ì†Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n</br>\n\n## EC2ì— ë„ì»¤ ì„¤ì¹˜\n```bash\nsudo snap install docker\n```\nëª…ë ¹ì–´ë¥¼ ì´ìš©í•˜ì—¬ ë„ì»¤ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.\n\nì²˜ìŒì—ëŠ” `apt update`ì™€ `apt install` ëª…ë ¹ì–´ë¥¼ í†µí•´ ë„ì»¤ë¥¼ ì„¤ì¹˜í•˜ë ¤ í–ˆëŠ”ë°, ì˜ ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\nì°¾ì•„ë³´ë‹ˆ ìš”ì¦˜ì€ `snap`ì„ ì‚¬ìš©í•˜ë©´ ë” ê°„ë‹¨íˆ ë„ì»¤ë¥¼ ì„¤ì¹˜í•  ìˆ˜ ìˆê¸°ì— `snap` ì‚¬ìš©ì„ ê¶Œì¥í•œë‹¤ê³  í•˜ë„¤ìš”.\n![](https://velog.velcdn.com/images/hooni_/post/25198967-049d-4723-9a59-c0b4ca7e5857/image.png)\n\nìœ„ì™€ ê°™ì´ ì„¤ì¹˜ë¥¼ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤.\n![](https://velog.velcdn.com/images/hooni_/post/6dcd0c64-4f45-491f-b172-b850c0a0febb/image.png)\n\nì €ëŠ” ë§¤ë²ˆ `sudo`ë¥¼ ì´ìš©í•˜ì—¬ ê¶Œí•œ ì¸ì¦í•˜ëŠ” ê²ƒì´ ê·€ì°®ì•„ì„œ ì¶”ê°€ì ì¸ ì„¤ì •ì„ í†µí•´ ì¼ë°˜ ì‚¬ìš©ìë„ ë„ì»¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.\nê³¼ì •ì€ [í•´ë‹¹ ë§í¬](https://snapcraft.io/docker)ë¥¼ ì°¸ê³ í–ˆìŠµë‹ˆë‹¤.\n\n```bash\n sudo addgroup --system docker\n sudo adduser $USER docker\n newgrp docker\n sudo snap disable docker\n sudo snap enable docker\n```\n\n### before\n![](https://velog.velcdn.com/images/hooni_/post/103f8395-0ee3-4eb8-935d-5fc165ae413c/image.png)\n### after\n![](https://velog.velcdn.com/images/hooni_/post/f1634b4b-120e-4808-943c-34a901dedf99/image.png)\n\n\n</br>\n\n## ë„ì»¤ì— mysql ì»¨í…Œì´ë„ˆ ì„¤ì¹˜\n\n### ì´ë¯¸ì§€ ë‹¤ìš´\n\në„ì»¤ì—ì„œ mysql ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë°›ìŠµë‹ˆë‹¤.\n```bash\ndocker pull mysql\n```\në„ì»¤ì—ì„œ **ì´ë¯¸ì§€**ë€ í•˜ë‚˜ì˜ í™˜ê²½íŒŒì¼(?)ì„ ë§í•©ë‹ˆë‹¤. nginx, mysql, node ë“±ë“± ë§ì€ ì´ë¯¸ì§€ë“¤ì´ ìˆëŠ”ë°, ì‚¬ìš© ëª©ì ì— ë§ê²Œ ì´ë¯¸ì§€ë¥¼ ì„ íƒí•´ì„œ ì»¨í…Œì´ë„ˆë¡œ ìƒì„±í•˜ë©´ í•´ë‹¹ ì´ë¯¸ì§€ì— ë§ëŠ” í™˜ê²½ì´ ì„¤ì¹˜ëœ ìƒíƒœë¡œ ì»¨í…Œì´ë„ˆë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nOOPì—ì„œ ì›í•˜ëŠ” í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒê³¼ ë¹„ìŠ·í•œ ëŠë‚Œì´ë¼ê³  í•  ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤.\n\n![](https://velog.velcdn.com/images/hooni_/post/9994784b-ed69-470b-8d09-e0323d42bc15/image.png)\n\nmysql ì´ë¯¸ì§€ê°€ ì •ìƒì ìœ¼ë¡œ ê¹”ë¦° ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n`tag`ëŠ” ë²„ì „ì„ ëœ»í•˜ëŠ”ë°, latestëŠ” ê°€ì¥ ìµœì‹ ë²„ì „ì´ë¼ëŠ” ëœ»ì…ë‹ˆë‹¤. ë§Œì•½ ì œê°€ `docker pull mysql:8.0.33` ëª…ë ¹ì–´ë¡œ ì´ë¯¸ì§€ë¥¼ í’€ ë°›ê²Œ ë˜ë©´ í•´ë‹¹ ë²„ì „ì˜ mysqlì„ í’€ ë°›ìŠµë‹ˆë‹¤.\n\n![](https://velog.velcdn.com/images/hooni_/post/1dae895b-e8e4-48f4-88b1-19527ffb205e/image.png)\n\ní˜„ì¬ ê°€ì¥ ìµœê·¼ ë²„ì „ì˜ mysqlì´ 8.0.33 ì´ì–´ì„œ image idê°€ ê°™ì€ ê²ƒ ê°™ìŠµë‹ˆë‹¤.\n\n### ì»¨í…Œì´ë„ˆ ìƒì„± & ì‹¤í–‰\n```bash\ndocker run --name mysql-dev-container -e MYSQL_ROOT_PASSWORD={ë¹„ë°€ë²ˆí˜¸} -d -p 3306:3306 mysql:latest\n```\n\ní•´ì„í•˜ìë©´, \n- `--name`: `mysql-dev-container`ì˜ ì´ë¦„ìœ¼ë¡œ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•œë‹¤.\n- `-e`: ì»¨í…Œì´ë„ˆì˜ í™˜ê²½ ë³€ìˆ˜ì¤‘ `MYSQL_ROOT_PASSWORD`ë¥¼ ì…ë ¥í•œ ë¹„ë°€ë²ˆí˜¸ë¡œ ì„¤ì •í•œë‹¤.\n- `-d`: ë°ëª¬ ëª¨ë“œë¡œ ì‹¤í–‰í•œë‹¤. (ë°±ê·¸ë¼ìš´ë“œ ëª¨ë“œ)\n- `-p`: í˜¸ìŠ¤íŠ¸ í¬íŠ¸:ì»¨í…Œì´ë„ˆ í¬íŠ¸ë¡œ ì„¤ì •í•œë‹¤.\n- ì´ë¯¸ì§€ëŠ” `mysql:latest` ë¡œ ì„¤ì •í•œë‹¤.\n\n![](https://velog.velcdn.com/images/hooni_/post/f3d174f9-732d-49c7-befb-1bc570d1e138/image.png)\n\nì •ìƒì ìœ¼ë¡œ ì»¨í…Œì´ë„ˆê°€ ìƒê¸´ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì´ì œ ì»¨í…Œì´ë„ˆì— ì ‘ì†í•´ë³´ê² ìŠµë‹ˆë‹¤.\n```bash\ndocker exec -it {ì»¨í…Œì´ë„ˆ Id} bash\n```\n\nìœ„ ëª…ë ¹ì–´ë¥¼ í†µí•´ ë„ì»¤ ì»¨í…Œì´ë„ˆ bashì— ì ‘ì†í–ˆìŠµë‹ˆë‹¤.\n\n### mysqlì— db ìƒì„±\nì´ì œ ì»¨í…Œì´ë„ˆì— mysql databaseë¥¼ ì„¤ì¹˜í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.\nì—¬ê¸°ë¶€í„°ëŠ” ì¼ë°˜ ë¦¬ëˆ…ìŠ¤ë‚˜ ë§¥ì—ì„œ database ìƒì„±í•˜ëŠ” ê²ƒê³¼ ë˜‘ê°™ìŠµë‹ˆë‹¤.\n\në¨¼ì € mysqlì— ì ‘ì†í•©ë‹ˆë‹¤.\n```bash\nmysql -u root -p\n```\nê·¸ë¦¬ê³ , databaseë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\n```bash\ncreate database ditoo_dev;\n```\n\nintellijì—ì„œ ìƒì„±í•œ dbì— ì •ìƒì ìœ¼ë¡œ ì ‘ê·¼ë˜ëŠ”ì§€ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤!\n![](https://velog.velcdn.com/images/hooni_/post/92c5d4df-6651-44da-aa40-dea62909261e/image.png)\nì •ìƒì ìœ¼ë¡œ ì ‘ê·¼ë˜ì—ˆìŠµë‹ˆë‹¤.\n\nê°„ë‹¨í•œ post, tag, post_tag í…Œì´ë¸”ì„ ë§Œë“¤ì–´ tableì´ ì •ìƒì ìœ¼ë¡œ ìƒì„±ë˜ëŠ”ì§€ í™•ì¸í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.\n\n![](https://velog.velcdn.com/images/hooni_/post/cb75119b-fa86-476b-9b26-bcf9001e992d/image.png)\n\nìŠ¤í”„ë§ ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ì •ìƒì ìœ¼ë¡œ í…Œì´ë¸”ì´ ìƒì„±ëœ ê²ƒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.\n\n![](https://velog.velcdn.com/images/hooni_/post/19117d25-f71e-4d01-b1fb-65e754bf582a/image.png)\n\ndbì—ë„ ì •ìƒì ìœ¼ë¡œ tableì´ ìƒê¸´ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.\n\n</br>\n\n## ë§ˆì¹˜ë©°\n\ndockerë¡œ ê°„ë‹¨í•˜ê²Œ dbë¥¼ ê´€ë¦¬í•˜ëŠ” ê²ƒì„ í•™ìŠµí–ˆìŠµë‹ˆë‹¤.\në‹¤ìŒ ì‹œê°„ì—ëŠ” docker-composeë¥¼ ì´ìš©í•˜ì—¬ db, spring, react ëª¨ë‘ ê°™ì´ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ í•™ìŠµí•´ë³´ë ¤ í•©ë‹ˆë‹¤."}]}},"pageContext":{}},"staticQueryHashes":[],"slicesMap":{}}